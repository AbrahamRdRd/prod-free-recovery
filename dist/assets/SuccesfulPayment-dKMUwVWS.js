import{d as N,u as B,a as h,r as x,ah as S,o as T,b as V,w as e,e as t,O as q,g as a,I as P,h as $,s as A,R as M,aa as O,z as R,t as o,k as z,J as H,L,ab as n,n as X,X as c,ac as u,C as d,m as I,v as j,l as D}from"./index-CUp2qGmE.js";import{h as E}from"./https-BqIIIB56.js";import{a as F}from"./axios-CwoVb0Lo.js";const J=(f,i)=>E.post("/api/departments/".concat(f,"/reservations"),i),K=I("img",{class:"mt-5",width:"100",height:"100",src:"https://i.imgur.com/oSAQEvV.png",alt:"instagram-check-mark"},null,-1),Q={class:"mt-3 mb-2 mx-4"},W=N({__name:"SuccesfulPayment",setup(f){const i=B(),g=h(()=>i.departmentInfo),m=x();m.value=g.value;const l=q(),y=l.query.total,b=Number(y).toFixed(2),_=x(),k=l.params.id,v=async s=>{try{const r=await F.get("https://api.stripe.com/v1/checkout/sessions/".concat(s),{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer sk_test_IKYCHOAmUhC7IPTdaoVtO58D"}});_.value=r.data,C(l.query,JSON.stringify(_.value))}catch(r){console.error("Hubo un error en traer la informaci칩n")}},C=async(s,r)=>{const w={payment_data:r,date_in:s.date_in,date_out:s.date_out};try{const p=await J(Number(k),w);console.log("RES",p.data)}catch(p){console.error("No pudimos crear tu reservaci칩n")}};return S(()=>{const s=h(()=>i.checkout_id);v(s.value)}),(s,r)=>(T(),V(t(D),null,{default:e(()=>[a(t(z),null,{default:e(()=>[a(t(P),null,{default:e(()=>[a(t($),{slot:"start"},{default:e(()=>[a(t(A),{"router-link":"/departments"},{default:e(()=>[a(t(M),{icon:t(O),size:"arge"},null,8,["icon"])]),_:1})]),_:1}),a(t(R),null,{default:e(()=>[o("Confirmaci칩n de su pago")]),_:1})]),_:1})]),_:1}),a(t(j),{class:"flex justify-content-center"},{default:e(()=>[a(t(H),{class:"flex flex-column justify-content-center align-items-center pt-5 min-w-100"},{default:e(()=>[a(t(L),{class:"flex flex-column align-items-center"},{default:e(()=>[K,a(t(n),{class:"text-4xl line-height-4 font-semibold"},{default:e(()=>[o("Pago exitoso")]),_:1}),a(t(n),null,{default:e(()=>[o("Falta menos para cumplir tus sue침os.")]),_:1})]),_:1}),a(t(X),{class:"flex flex-column max-h-auto w-11 mt-5"},{default:e(()=>[a(t(c),{lines:"none",class:"mt-3 mx-4"},{default:e(()=>[a(t(u),{class:"font-bold"},{default:e(()=>[o("Lugar")]),_:1}),a(t(n),null,{default:e(()=>[o(d(t(l).query.department),1)]),_:1})]),_:1}),a(t(c),{lines:"none",class:"mt-2 mx-4"},{default:e(()=>[a(t(u),{class:"font-bold"},{default:e(()=>[o("Check in:")]),_:1}),a(t(n),null,{default:e(()=>[o(d(t(l).query.date_in),1)]),_:1})]),_:1}),a(t(c),{lines:"none",class:"mt-2 mx-4"},{default:e(()=>[a(t(u),{class:"font-bold"},{default:e(()=>[o("Check out:")]),_:1}),a(t(n),null,{default:e(()=>[o(d(t(l).query.date_out),1)]),_:1})]),_:1}),a(t(c),{class:"mt-2 mx-4"},{default:e(()=>[a(t(u),{class:"font-bold"},{default:e(()=>[o("Precio x noche:")]),_:1}),a(t(n),null,{default:e(()=>[o("$"+d(m.value.price)+" MXN",1)]),_:1})]),_:1}),I("div",Q,[a(t(c),{lines:"none"},{default:e(()=>[a(t(u),{class:"font-bold"},{default:e(()=>[o("Monto total(incluye cargos):")]),_:1}),a(t(n),null,{default:e(()=>[o("$"+d(t(b))+" MXN",1)]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{W as default};
