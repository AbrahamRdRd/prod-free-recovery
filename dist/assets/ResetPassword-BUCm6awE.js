import{d as h,r as u,c as p,$ as C,by as o,be as e,aM as R,aa as a,a9 as c,a2 as f,bC as T}from"./@vue-yfti66JX.js";import{m as A,n as P,o as M,A as N,p as O,x as v,s as w,l as D,B as E,q as H,g as S}from"./@ionic-D3TE2VMj.js";import{b as U}from"./ionicons-lnr37WKp.js";import{u as $,b as j}from"./vue-router-C1vmwl4t.js";import{r as q}from"./auth-mCwTosrf.js";import"./@stencil-CHpqkKxm.js";import"./https-ydxeCDJp.js";import"./axios-CwoVb0Lo.js";import"./index-dYhw7l_n.js";import"./pinia-FlwmMssk.js";import"./crypto-js-BD323iWx.js";import"./register-service-worker-TYP_X6yW.js";/* empty css                  */import"./vue-toast-notification-CyaKMIrI.js";import"./vue-AlRGbnWJ.js";const F={class:"flex justify-content-center"},re=h({__name:"ResetPassword",setup(K){const b=$(),_=j(),I=b.params.token,l=u(),r=u(),n=u(!1),y=[{text:"Continuar",role:"confirm",handler:()=>{_.replace("/departments")}}],B=["OK"],m=u(!1),i=u(""),V=t=>{n.value=t},x=p(()=>l.value!==r.value),k=p(()=>l.value&&r.value&&!x.value),g=async()=>{try{if(k.value){const t={token:I,password:l.value,password_confirmation:r.value};t.password.length>=8?(await q(t),n.value=!0,m.value=!0,i.value="Tu contraseña ha sido modificada exitosamente."):(n.value=!0,i.value="Tu contraseña debe tener más de 8 carácteres.")}else n.value=!0,m.value=!1,i.value="Las contraseñas no coinciden, porfavor revisalas."}catch(t){console.error("Algo ha salido mal, revisa tu información")}};return(t,s)=>(R(),C(e(S),null,{default:o(()=>[a(e(O),null,{default:o(()=>[a(e(A),null,{default:o(()=>[a(e(P),{slot:"start"},{default:o(()=>[a(e(M),{defaultHref:"/login",text:"Back",icon:e(U)},null,8,["icon"])]),_:1}),a(e(N),null,{default:o(()=>[c("Suites")]),_:1})]),_:1})]),_:1}),a(e(H),null,{default:o(()=>[f("div",F,[f("form",{class:"w-9 mt-3",onSubmit:T(g,["prevent"])},[a(e(v),null,{default:o(()=>[a(e(w),{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=d=>l.value=d),type:"password",label:"Enter your new password",min:"8","label-placement":"stacked",placeholder:"Enter your new password"},null,8,["modelValue"])]),_:1}),a(e(v),null,{default:o(()=>[a(e(w),{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=d=>r.value=d),type:"password",label:"Repeat your new password",min:"8","label-placement":"stacked",placeholder:"Repeat your new password"},null,8,["modelValue"])]),_:1}),a(e(D),{type:"submit",expand:"full",class:"mt-4 ml-3"},{default:o(()=>[c("Recover password")]),_:1})],32)]),a(e(E),{"is-open":n.value,trigger:"present-alert","sub-header":i.value,buttons:m.value?y:B,onDidDismiss:s[2]||(s[2]=d=>V(!1))},null,8,["is-open","sub-header","buttons"])]),_:1})]),_:1}))}});export{re as default};
