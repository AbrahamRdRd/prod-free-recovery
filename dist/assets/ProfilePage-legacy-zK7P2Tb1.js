System.register(["./@ionic-legacy-CbonVIpO.js","./index-legacy-s0JnHh3C.js","./ionicons-legacy-HQMOYMzb.js","./user-legacy-D52qAYfS.js","./@vue-legacy-D0SgPP5D.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./LoginAuth-legacy-DSilYGg5.js","./@stencil-legacy-CapHDfm8.js","./vue-router-legacy-BXDKlxlV.js","./pinia-legacy-DXNVVc9U.js","./crypto-js-legacy-DI2495am.js","./register-service-worker-legacy-OLieyxJW.js","./primeflex-legacy-BopLd2K7.js","./https-legacy-Jp9Bf5WL.js","./axios-legacy-CUPSUh8R.js","./vue-toast-notification-legacy-CcnPxyzq.js","./vue-legacy-CAYYIPah.js","./auth-legacy-DdX0GxLZ.js"],(function(e,l){"use strict";var a,n,o,t,u,c,d,s,i,r,m,f,p,v,y,g,k,_,h,b,j,V,x,C,w,P,E,S,U,D,I,z,B,F,L,O,$,A,H,M,N,T,q;return{setters:[e=>{a=e.u,n=e.m,o=e.n,t=e.o,u=e.A,c=e.p,d=e.r,s=e.D,i=e.E,r=e.l,m=e.F,f=e.x,p=e.s,v=e.d,y=e.C,g=e.B,k=e.q,_=e.g,h=e.G,b=e._},e=>{j=e.u},e=>{V=e.b,x=e.e,C=e.s},e=>{w=e.g,P=e.u},e=>{E=e.d,S=e.c,U=e.r,D=e.b,I=e.aM,z=e.$,B=e.by,F=e.aa,L=e.be,O=e.a9,$=e.a2,A=e.a0,H=e.aP,M=e.aN,N=e.ac},e=>{T=e._},e=>{q=e.L},null,null,null,null,null,null,null,null,null,null,null],execute:function(){var G=document.createElement("style");G.textContent=".example-content[data-v-3549ccd6]{display:flex;align-items:center;justify-content:center;height:100%}.avatar_btn[data-v-3549ccd6]{cursor:pointer}\n",document.head.appendChild(G);const J={class:"flex flex-column justify-content-center align-items-center"},R=["src"],W=(e=>(H("data-v-3549ccd6"),e=e(),M(),e))((()=>$("img",{loading:"lazy",class:"border-circle",alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1))),K=T(E({__name:"ProfileInfo",setup(e){const E=N((()=>b((()=>l.import("./ModalProfile-legacy-D6OJN0U7.js")),void 0))),H=j(),M=S((()=>H.userInfo)).value,T=U(!1),q=a(),G=U(!1),K=U(),Q=U(null),X=U(),Y=U({}),Z=U(!1),ee=["Ok"],le=async()=>{const e=H.token;try{var l,a;Y.value=(await w(M.id)).data;const n=null===(l=Y.value.country_code)||void 0===l?void 0:l.phone_code;X.value=`+(${n}) ${Y.value.phone}`,K.value=null===(a=Y.value.city)||void 0===a?void 0:a.state.country.name,H.setSession(e,Y.value)}catch(n){console.error("Hubo un errror al traer la información del usuario.")}},ae=async()=>{const e=await h.create({component:E,componentProps:{userId:Y.value,avatar:Q.value}});e.present();const{data:l}=await e.onWillDismiss();"confirm"===l&&await le()},ne=()=>{document.getElementById("file-upload").click()},oe=e=>{const l=e.target.files[0];Q.value=l,(async e=>{const l=new FormData;l.append("image",e);try{await P(Y.value.id,l),await le()}catch(a){console.error(a.response.data.message),422===a.response.status&&(Z.value=!0)}})(l)},te=()=>{G.value=!0,setTimeout((()=>{H.logout(),q.push("/")}),2e3)};return D((()=>{le()})),(e,l)=>(I(),z(L(_),null,{default:B((()=>[F(L(c),null,{default:B((()=>[F(L(n),null,{default:B((()=>[F(L(o),{slot:"start"},{default:B((()=>[F(L(t),{defaultHref:"/",icon:L(V),text:"Back"},null,8,["icon"])])),_:1}),F(L(u),null,{default:B((()=>[O("Personal profile")])),_:1})])),_:1})])),_:1}),F(L(k),{fullscreen:!0},{default:B((()=>[$("div",J,[F(L(d),{class:"mb-6 w-full md:w-30rem"},{default:B((()=>[F(L(s),{class:"flex justify-content-center mt-5"},{default:B((()=>[Y.value.avatar?(I(),z(L(i),{key:0,onClick:ne,class:"avatar_btn",as:"ion-button"},{default:B((()=>[$("img",{alt:"Silhouette of a person's head",src:Y.value.avatar},null,8,R),$("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:oe},null,32)])),_:1})):Y.value.avatar?A("",!0):(I(),z(L(r),{key:1,class:"w-2 h-2",onClick:ne,size:"large",fill:"outline",color:"dark"},{default:B((()=>[$("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:oe},null,32),W])),_:1}))])),_:1}),F(L(m),{class:"mt-5"},{default:B((()=>[F(L(f),null,{default:B((()=>[F(L(p),{label:"Name(s):",placeholder:"Jonh",modelValue:Y.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>Y.value.name=e),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),F(L(r),{fill:"outline",color:"dark",onClick:l[1]||(l[1]=e=>ae())},{default:B((()=>[O(" Edit "),F(L(v),{slot:"end",icon:L(x),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),F(L(f),null,{default:B((()=>[F(L(p),{label:"First surname:",placeholder:"Cena",modelValue:Y.value.first_name,"onUpdate:modelValue":l[2]||(l[2]=e=>Y.value.first_name=e),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),F(L(r),{fill:"outline",color:"dark",onClick:l[3]||(l[3]=e=>ae())},{default:B((()=>[O(" Edit "),F(L(v),{slot:"end",icon:L(x),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),F(L(f),null,{default:B((()=>[F(L(p),{label:"Second surname:",placeholder:"Rodríguez",modelValue:Y.value.second_name,"onUpdate:modelValue":l[4]||(l[4]=e=>Y.value.second_name=e),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),F(L(r),{fill:"outline",color:"dark",onClick:l[5]||(l[5]=e=>ae())},{default:B((()=>[O(" Edit "),F(L(v),{slot:"end",icon:L(x),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),F(L(f),null,{default:B((()=>[F(L(p),{label:"email",placeholder:"email@email.com",modelValue:Y.value.email,"onUpdate:modelValue":l[6]||(l[6]=e=>Y.value.email=e),"label-placement":"stacked",readonly:!T.value},null,8,["modelValue","readonly"]),T.value?A("",!0):(I(),z(L(r),{key:0,fill:"outline",color:"dark",onClick:l[7]||(l[7]=e=>ae())},{default:B((()=>[O(" Edit "),F(L(v),{slot:"end",icon:L(x),color:"dark"},null,8,["icon"])])),_:1})),T.value?(I(),z(L(r),{key:1,fill:"outline",color:"dark"},{default:B((()=>[O(" Save "),F(L(v),{slot:"end",icon:L(C),color:"dark"},null,8,["icon"])])),_:1})):A("",!0)])),_:1}),F(L(f),null,{default:B((()=>[F(L(p),{label:"Phone",placeholder:"(+52) 888-888-88-88",modelValue:X.value,"onUpdate:modelValue":l[8]||(l[8]=e=>X.value=e),"label-placement":"stacked",readonly:"",type:"text"},null,8,["modelValue"]),F(L(r),{fill:"outline",color:"dark",onClick:l[9]||(l[9]=e=>ae())},{default:B((()=>[O(" Edit "),F(L(v),{slot:"end",icon:L(x),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),F(L(f),null,{default:B((()=>[F(L(p),{label:"País",placeholder:"your country",modelValue:K.value,"onUpdate:modelValue":l[10]||(l[10]=e=>K.value=e),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),F(L(r),{fill:"outline",color:"dark",onClick:l[11]||(l[11]=e=>ae())},{default:B((()=>[O(" Edit "),F(L(v),{slot:"end",icon:L(x),color:"dark"},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),F(L(r),{onClick:te,class:"px-1 w-full md:w-30rem",expand:"block",fill:"outline",color:"dark"},{default:B((()=>[O("Cerrar Sesión")])),_:1}),G.value?(I(),z(L(y),{key:0,"is-open":G.value,message:"Cerrando sessión...",spinner:"circles",duration:2e3},null,8,["is-open"])):A("",!0),F(L(g),{isOpen:Z.value,header:"Please try with another image!",message:"The profile picture field must be a file of type: jpeg, png, jpg, gif.",buttons:ee,onDidDismiss:l[12]||(l[12]=e=>{return l=!1,void(Z.value=l);var l})},null,8,["isOpen"])])])),_:1})])),_:1}))}}),[["__scopeId","data-v-3549ccd6"]]);e("default",E({__name:"ProfilePage",setup(e){const l=j(),a=U();return S((()=>l.isLogged)).value||(a.value=!0),(e,l)=>(I(),z(L(_),null,{default:B((()=>[a.value?(I(),z(q,{key:1})):(I(),z(K,{key:0}))])),_:1}))}}))}}}));
