import{d as C,r as p,aM as m,$ as g,by as n,a2 as s,aa as o,bC as N,be as e,a9 as h,a0 as R,aP as S,aN as k}from"./@vue-yfti66JX.js";import{u as B,E as z,t as D,G as O,M as P,s as f,l as V,v as q,r as E,L as M,z as v,g as T}from"./@ionic-BYXd9M1L.js";import{u as $}from"./index-C56Jknfv.js";import{a as j,f as K}from"./auth-CAi8WO0B.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./@stencil-CHpqkKxm.js";import"./vue-router-C1vmwl4t.js";import"./ionicons-vuVtR0Xh.js";import"./pinia-FlwmMssk.js";import"./register-service-worker-TYP_X6yW.js";/* empty css                  */import"./https-DyLAiSWF.js";import"./axios-CwoVb0Lo.js";import"./vue-toast-notification-BuDNWbXa.js";import"./vue-0gI2gMPI.js";const I=l=>(S("data-v-1a0c3ba2"),l=l(),k(),l),J={class:"h-full flex justify-content-center align-items-center"},Z={class:"ion-margin-top ion-padding-horizontal"},F={class:"ion-margin-top ion-padding-horizontal"},H=I(()=>s("p",{class:"forgot-presente-alert ion-margin-start ion-padding-top"},[s("a",{id:"present-alert","router-direction":"forward"},"¿Olvidaste tú contraseña?")],-1)),Q={class:"ion-padding-horizontal"},U=I(()=>s("p",{class:"ion-margin-start"},[h("¿Aún no tienes cuenta? "),s("a",{href:"/registro",as:"ion-button","router-direction":"forward",id:"open-loading",class:"anchor-register"},"Registrate aquí")],-1)),W=C({__name:"LoginAuth",emits:["change","deactiveAuth"],setup(l,{emit:X}){const _=B(),w=$(),r=p({email:"",password:""}),u=p(!1);p(!1);const d=p(!1),b=["OK"],y=[{text:"Cerrar"},{text:"Enviar",handler:t=>{A(t[0])}}],x=[{placeholder:"Ingresa tú correo",type:"email"}],L=async()=>{d.value=!0;try{const t=(await j(r.value)).data;w.setSession(t.token,t.user),_.push("/departments")}catch(t){t.response.status==406&&(u.value=!0)}},A=async t=>{try{await K({email:t})}catch(a){console.error("Revisa tú correo")}},c=t=>{u.value=t};return(t,a)=>(m(),g(e(T),null,{default:n(()=>[s("div",J,[o(e(E),{class:"w-full md:w-30rem"},{default:n(()=>[s("form",{onSubmit:N(L,["prevent"]),class:"ion-margin-horizontal"},[o(e(z),null,{default:n(()=>[o(e(D),{class:"flex justify-content-center"},{default:n(()=>[o(e(O),null,{default:n(()=>[o(e(P),{src:"https://i.imgur.com/NJrNK4Z.png",alt:"Turismo de salud. Regresa como nueva."})]),_:1})]),_:1})]),_:1}),s("div",Z,[o(e(f),{value:r.value.email,onInput:a[0]||(a[0]=i=>r.value.email=i.target.value),label:"Email","label-placement":"floating",fill:"outline",type:"email",placeholder:"email@domain.com"},null,8,["value"])]),s("div",F,[o(e(f),{value:r.value.password,onInput:a[1]||(a[1]=i=>r.value.password=i.target.value),label:"Password",type:"password","label-placement":"floating",fill:"outline"},null,8,["value"])]),H,s("div",Q,[o(e(V),{expand:"block",type:"submit"},{default:n(()=>[h("Log In")]),_:1})]),o(e(q)),U],32)]),_:1})]),d.value?(m(),g(e(M),{key:0,"is-open":d.value,message:"Loading...",spinner:"circles",duration:"2000"},null,8,["is-open"])):R("",!0),o(e(v),{"is-open":u.value,trigger:"present-alert",header:"Ingresa tú correo",buttons:y,inputs:x,onDidDismiss:a[2]||(a[2]=i=>c(!1))},null,8,["is-open"]),o(e(v),{"is-open":u.value,header:"Correo o contraseñas son incorrectos.",message:"Algo salio mal. Intenta de nuevo",buttons:b,onDidDismiss:a[3]||(a[3]=i=>c(!1))},null,8,["is-open"])]),_:1}))}}),ge=G(W,[["__scopeId","data-v-1a0c3ba2"]]);export{ge as default};
