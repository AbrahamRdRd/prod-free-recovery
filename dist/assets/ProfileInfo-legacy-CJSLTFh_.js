System.register(["./index-legacy-CW1NlSFU.js","./user-legacy-XgMERCGC.js","./https-legacy-DyGVZRWv.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-legacy-CUPSUh8R.js"],(function(l,e){"use strict";var a,o,t,n,u,d,i,c,r,s,m,v,f,p,_,y,k,b,g,h,V,C,w,I,S,U,x,j,P,E,H,O,z,D,F,A,J,N,Y,q,K,M,R,W,$,B,G;return{setters:[l=>{a=l.d,o=l.r,t=l.u,n=l.a,u=l.aj,d=l.o,i=l.c,c=l.g,r=l.w,s=l.e,m=l.I,v=l.h,f=l.s,p=l.t,_=l.z,y=l.k,k=l.m,b=l.W,g=l.q,h=l.aF,V=l.K,C=l.H,w=l.b,I=l.aG,S=l.C,U=l.X,x=l.v,j=l.aH,P=l.f,E=l.a0,H=l.i,O=l.aa,z=l.n,D=l.L,F=l.P,A=l.V,J=l.R,N=l.aI,Y=l.aJ,q=l.aK,K=l.l,M=l.x,R=l.y},l=>{W=l.u,$=l.g},l=>{B=l.h},l=>{G=l._},null],execute:function(){var e=document.createElement("style");e.textContent=".example-content[data-v-ced7d1d4]{display:flex;align-items:center;justify-content:center;height:100%}\n",document.head.appendChild(e);const L=a({__name:"ModalProfile",props:{userId:Object,avatar:File},setup(l){var e,a;o();const P=o({id:0,email:"",name:"",first_name:"",second_name:"",password:"",role_id:0,city_id:0,deleted_at:null}),E=l,H=()=>j.dismiss(null,"cancel"),O=t(),z=o(),D=o(),F=o(),A=o(),J=o(),N=o();n((()=>JSON.parse(O.userInfo))),P.value=E.userId,console.log("request.value ",P.value),z.value=null===(e=P.value.city)||void 0===e?void 0:e.state.country_id,D.value=null===(a=P.value.city)||void 0===a?void 0:a.state_id,J.value=P.value.city_id;const Y=async()=>{try{const l=(await B.get("/api/countries")).data;F.value=l.data}catch(l){console.error("Hubo un error al traer las ciudades")}},q=async l=>{try{const a=(await(e=l,B.get(`/api/countries/${e}/states`))).data;A.value=a.data}catch(a){console.error("Hubo un error al traer los estados")}var e},K=async l=>{try{const a=(await(e=l,B.get(`/api/states/${e}/cities`))).data;N.value=a.data}catch(a){console.log("Hubo un error en al traer las ciudades")}var e},M=l=>{console.log("Selected country ID:",l.detail.value),q(l.detail.value)},R=l=>{console.log("Selected State ID:",l.detail.value),K(l.detail.value)},$=l=>{console.log("Selected City ID:",l.detail.value),P.value.city_id=l.detail.value},G=async()=>{const l={email:P.value.email,name:P.value.name,first_name:P.value.first_name,second_name:P.value.second_name,phone:P.value.phone,city_id:P.value.city_id,image:E.avatar},e=new FormData;for(const n in l)if(Object.prototype.hasOwnProperty.call(l,n)){const o=n,t=l[o];var a;t instanceof File?e.append(o,t):e.append(o,null!==(a=null==t?void 0:t.toString())&&void 0!==a?a:"")}try{var o;(await W(null===(o=E.userId)||void 0===o?void 0:o.id,e)).data,j.dismiss("confirm")}catch(t){console.error("Algo salio mal al actualizar.")}};return u((()=>{Y()})),(l,e)=>(d(),i(V,null,[c(s(y),null,{default:r((()=>[c(s(m),null,{default:r((()=>[c(s(v),{slot:"start"},{default:r((()=>[c(s(f),{color:"medium",onClick:H},{default:r((()=>[p("Cancel")])),_:1})])),_:1}),c(s(_),null,{default:r((()=>[p("Actualiza tú información")])),_:1}),c(s(v),{slot:"end"},{default:r((()=>[c(s(f),{onClick:G,strong:!0},{default:r((()=>[p("Confirm")])),_:1})])),_:1})])),_:1})])),_:1}),c(s(x),{class:"ion-padding"},{default:r((()=>[k("form",{onSubmit:G},[c(s(b),null,{default:r((()=>[c(s(g),{"label-placement":"stacked",label:"Cambia tu nombre(s)",modelValue:P.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>P.value.name=l),placeholder:"Your name"},null,8,["modelValue"])])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{"label-placement":"stacked",label:"Cambia tu primer apellido",modelValue:P.value.first_name,"onUpdate:modelValue":e[1]||(e[1]=l=>P.value.first_name=l),placeholder:"Your second name"},null,8,["modelValue"])])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{"label-placement":"stacked",label:"Cambia tu segundo apellido",modelValue:P.value.second_name,"onUpdate:modelValue":e[2]||(e[2]=l=>P.value.second_name=l),placeholder:"Your last name"},null,8,["modelValue"])])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{"label-placement":"stacked",label:"Cambia tu cuenta de email",modelValue:P.value.email,"onUpdate:modelValue":e[3]||(e[3]=l=>P.value.email=l),placeholder:"Your email"},null,8,["modelValue"])])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{"label-placement":"stacked",label:"Cambia tu telefono",modelValue:P.value.phone,"onUpdate:modelValue":e[4]||(e[4]=l=>P.value.phone=l),placeholder:"(+52) 888-88-88"},null,8,["modelValue"])])),_:1}),c(s(b),{lines:"none"},{default:r((()=>[c(s(h),{modelValue:z.value,"onUpdate:modelValue":e[5]||(e[5]=l=>z.value=l),onIonChange:M,class:"mt-3 mr-2",label:"País","label-placement":"floating",fill:"outline"},{default:r((()=>[(d(!0),i(V,null,C(F.value,(l=>(d(),w(s(I),{value:l.id},{default:r((()=>[p(S(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"]),D.value?(d(),w(s(h),{key:0,modelValue:D.value,"onUpdate:modelValue":e[6]||(e[6]=l=>D.value=l),onIonChange:R,class:"mt-3 mr-2",label:"Estado","label-placement":"floating",fill:"outline"},{default:r((()=>[(d(!0),i(V,null,C(A.value,(l=>(d(),w(s(I),{value:l.id},{default:r((()=>[p(S(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])):U("",!0),J.value?(d(),w(s(h),{key:1,modelValue:J.value,"onUpdate:modelValue":e[7]||(e[7]=l=>J.value=l),onIonChange:$,class:"mt-3",label:"Ciudad","label-placement":"floating",fill:"outline"},{default:r((()=>[(d(!0),i(V,null,C(N.value,(l=>(d(),w(s(I),{value:l.id},{default:r((()=>[p(S(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])):U("",!0)])),_:1})],32)])),_:1})],64))}}),T={class:"h-full flex flex-column justify-content-center align-items-center"},X=["src"],Q=(l=>(M("data-v-ced7d1d4"),l=l(),R(),l))((()=>k("img",{class:"border-circle",alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)));l("default",G(a({__name:"ProfileInfo",setup(l){const e=t(),a=n((()=>e.userInfo)),u=JSON.parse(a.value),h=o({deleted_at:null}),C=o(!1),I=t(),S=P(),M=o(!1),R=async()=>{const l=await j.create({component:L,componentProps:{userId:h.value,avatar:G.value}});l.present();const{data:e,role:a}=await l.onWillDismiss();"confirm"===e&&await al()},B=()=>{document.getElementById("file-upload").click()},G=o(),Z=l=>{const e=l.target.files[0];G.value=e,ol(e)},ll=()=>{I.logout(),M.value=!0,setTimeout((()=>{S.replace("/")}),3e3)},el=o(),al=async()=>{try{var l,e;h.value=(await $(u.id)).data,console.log("NAME",null===(l=h.value.city)||void 0===l?void 0:l.state.country),el.value=null===(e=h.value.city)||void 0===e?void 0:e.state.country.name}catch(a){console.error("Hubo un errror al traer la información del usuario.")}},ol=async l=>{const e={...h.value,avatar:l},a=new FormData;for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const l=n,t=e[l];var o;t instanceof File?a.append(l,t):a.append(l,null!==(o=null==t?void 0:t.toString())&&void 0!==o?o:"")}try{await W(h.value.id,a)}catch(t){console.error("Algo salio mal al actualizar.")}};return E((()=>{al()})),(l,e)=>(d(),i(V,null,[c(s(y),null,{default:r((()=>[c(s(m),null,{default:r((()=>[c(s(v),{slot:"start"},{default:r((()=>[c(s(H),{defaultHref:"/departments",icon:s(O)},null,8,["icon"])])),_:1}),c(s(_),null,{default:r((()=>[p("Perfil personal")])),_:1})])),_:1})])),_:1}),c(s(K),null,{default:r((()=>[c(s(x),null,{default:r((()=>[k("div",T,[c(s(z),{class:"mb-6 w-full md:w-30rem"},{default:r((()=>[c(s(D),{class:"flex justify-content-center mt-5"},{default:r((()=>[h.value.avatar?(d(),w(s(F),{key:0},{default:r((()=>[k("img",{alt:"Silhouette of a person's head",src:h.value.avatar},null,8,X)])),_:1})):U("",!0),h.value.avatar?U("",!0):(d(),w(s(f),{key:1,class:"w-2 h-2",onClick:B,size:"large",fill:"outline",color:"dark"},{default:r((()=>[k("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:Z},null,32),Q])),_:1}))])),_:1}),c(s(A),{class:"mt-5"},{default:r((()=>[c(s(b),null,{default:r((()=>[c(s(g),{label:"Nombre(s):",placeholder:"Jonh",modelValue:h.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>h.value.name=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),c(s(f),{fill:"outline",color:"dark",onClick:e[1]||(e[1]=l=>R())},{default:r((()=>[p(" Edit "),c(s(J),{slot:"end",icon:s(N),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{label:"Primer apellido:",placeholder:"Cena",modelValue:h.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=l=>h.value.first_name=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),c(s(f),{fill:"outline",color:"dark",onClick:e[3]||(e[3]=l=>R())},{default:r((()=>[p(" Edit "),c(s(J),{slot:"end",icon:s(N),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{label:"Segundo apellido:",placeholder:"Rodríguez",modelValue:h.value.second_name,"onUpdate:modelValue":e[4]||(e[4]=l=>h.value.second_name=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),c(s(f),{fill:"outline",color:"dark",onClick:e[5]||(e[5]=l=>R())},{default:r((()=>[p(" Edit "),c(s(J),{slot:"end",icon:s(N),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{label:"email",placeholder:"email@email.com",modelValue:h.value.email,"onUpdate:modelValue":e[6]||(e[6]=l=>h.value.email=l),"label-placement":"stacked",readonly:!C.value},null,8,["modelValue","readonly"]),C.value?U("",!0):(d(),w(s(f),{key:0,fill:"outline",color:"dark",onClick:e[7]||(e[7]=l=>R())},{default:r((()=>[p(" Edit "),c(s(J),{slot:"end",icon:s(N),color:"dark"},null,8,["icon"])])),_:1})),C.value?(d(),w(s(f),{key:1,fill:"outline",color:"dark"},{default:r((()=>[p(" Save "),c(s(J),{slot:"end",icon:s(Y),color:"dark"},null,8,["icon"])])),_:1})):U("",!0)])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{label:"Phone",placeholder:"(+52) 888-888-88-88",modelValue:h.value.phone,"onUpdate:modelValue":e[8]||(e[8]=l=>h.value.phone=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),c(s(f),{fill:"outline",color:"dark",onClick:e[9]||(e[9]=l=>R())},{default:r((()=>[p(" Edit "),c(s(J),{slot:"end",icon:s(N),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),c(s(b),null,{default:r((()=>[c(s(g),{label:"País",placeholder:"your country",modelValue:el.value,"onUpdate:modelValue":e[10]||(e[10]=l=>el.value=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),c(s(f),{fill:"outline",color:"dark",onClick:e[11]||(e[11]=l=>R())},{default:r((()=>[p(" Edit "),c(s(J),{slot:"end",icon:s(N),color:"dark"},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),c(s(f),{onClick:ll,class:"px-1 w-full md:w-30rem",expand:"block",fill:"outline",color:"dark"},{default:r((()=>[p("Cerrar Sesión")])),_:1}),M.value?(d(),w(s(q),{key:0,"is-open":M.value,message:"Cerrando sessión...",spinner:"circles"},null,8,["is-open"])):U("",!0)])])),_:1})])),_:1})],64))}}),[["__scopeId","data-v-ced7d1d4"]]))}}}));
