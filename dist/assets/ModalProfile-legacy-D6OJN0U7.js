System.register(["./@ionic-legacy-CbonVIpO.js","./user-legacy-D52qAYfS.js","./countries-legacy-D-CYJ9Ji.js","./https-legacy-Jp9Bf5WL.js","./@vue-legacy-D0SgPP5D.js","./@stencil-legacy-CapHDfm8.js","./vue-router-legacy-BXDKlxlV.js","./ionicons-legacy-HQMOYMzb.js","./axios-legacy-CUPSUh8R.js","./index-legacy-s0JnHh3C.js","./pinia-legacy-DXNVVc9U.js","./crypto-js-legacy-DI2495am.js","./register-service-worker-legacy-OLieyxJW.js","./primeflex-legacy-BopLd2K7.js","./vue-toast-notification-legacy-CcnPxyzq.js","./vue-legacy-CAYYIPah.js"],(function(l,e){"use strict";var a,u,o,n,t,d,i,c,r,s,v,m,y,_,p,f,g,b,h,V,j,C,w,U,k,I,x,$,H;return{setters:[l=>{a=l.m,u=l.n,o=l.l,n=l.A,t=l.p,d=l.x,i=l.s,c=l.t,r=l.v,s=l.q,v=l.G},l=>{m=l.a},l=>{y=l.g,_=l.c},l=>{p=l.h},l=>{f=l.d,g=l.r,b=l.aG,h=l.aM,V=l.a1,j=l.aa,C=l.by,w=l.be,U=l.a9,k=l.H,I=l.aU,x=l.$,$=l.b7,H=l.a0},null,null,null,null,null,null,null,null,null,null,null],execute:function(){l("default",f({__name:"ModalProfile",props:{userId:Object,avatar:File},setup(l){var e,f,S;const Y=g(),F=l,N=()=>v.dismiss(null,"cancel"),O=g(),q=g(),z=g(),A=g([]),D=g(),G=g([]),M=g();Y.value=F.userId,O.value=null===(e=Y.value)||void 0===e||null===(e=e.city)||void 0===e?void 0:e.state.country_id,q.value=null===(f=Y.value)||void 0===f||null===(f=f.city)||void 0===f?void 0:f.state_id,D.value=null===(S=Y.value)||void 0===S?void 0:S.city_id;const P=async l=>{try{A.value=(await(e=l,p.get(`/api/countries/${e}/states`))).data}catch(a){console.error("Hubo un error al traer los estados")}var e},R=async l=>{try{G.value=(await(e=l,p.get(`/api/states/${e}/cities`))).data}catch(a){console.error("Hubo un error en al traer las ciudades",a)}var e},W=l=>{P(l.detail.value)},B=l=>{R(l.detail.value)},E=l=>{if(Y.value){const e=Number(l.detail.value);isNaN(e)?console.error("Invalid City ID:",l.detail.value):Y.value.city_id=e}else console.error("Request object is not initialized.")},J=async()=>{var l,e,a,u,o,n,t;const d={email:null===(l=Y.value)||void 0===l?void 0:l.email,name:null===(e=Y.value)||void 0===e?void 0:e.name,first_name:null===(a=Y.value)||void 0===a?void 0:a.first_name,second_name:null===(u=Y.value)||void 0===u?void 0:u.second_name,phone:null===(o=Y.value)||void 0===o?void 0:o.phone,city_id:null===(n=Y.value)||void 0===n?void 0:n.city_id,image:F.avatar,country_code_id:null===(t=Y.value)||void 0===t||null===(t=t.country_code)||void 0===t?void 0:t.id},i=new FormData;for(const v in d)if(Object.prototype.hasOwnProperty.call(d,v)){const l=v,e=d[l];var c;e instanceof File?i.append(l,e):i.append(l,null!==(c=null==e?void 0:e.toString())&&void 0!==c?c:"")}try{var r;(await m(null===(r=F.userId)||void 0===r?void 0:r.id,i)).data,v.dismiss("confirm")}catch(s){console.error("Algo salio mal al actualizar.")}};return b((()=>{var l,e,a,u;(async()=>{try{z.value=(await y()).data}catch(l){console.error("Hubo un error al traer las ciudades")}})(),(async()=>{try{M.value=(await _()).data}catch(l){console.error("We couldn't onbtain the country codes")}})(),(null!=(null===(l=Y.value)||void 0===l||null===(l=l.city)||void 0===l?void 0:l.state.country_id)||null!=(null===(e=Y.value)||void 0===e||null===(e=e.city)||void 0===e?void 0:e.state_id))&&(P(null===(a=Y.value)||void 0===a||null===(a=a.city)||void 0===a?void 0:a.state.country_id),R(null===(u=Y.value)||void 0===u||null===(u=u.city)||void 0===u?void 0:u.state_id))})),(l,e)=>(h(),V(k,null,[j(w(t),null,{default:C((()=>[j(w(a),null,{default:C((()=>[j(w(u),{slot:"start"},{default:C((()=>[j(w(o),{color:"medium",onClick:N},{default:C((()=>[U("Cancel")])),_:1})])),_:1}),j(w(n),null,{default:C((()=>[U("Update your information")])),_:1}),j(w(u),{slot:"end"},{default:C((()=>[j(w(o),{onClick:J,strong:!0},{default:C((()=>[U("Confirm")])),_:1})])),_:1})])),_:1})])),_:1}),j(w(s),{class:"ion-padding"},{default:C((()=>[Y.value?(h(),V("form",{key:0,onSubmit:J},[j(w(d),null,{default:C((()=>[j(w(i),{"label-placement":"stacked",label:"Change your name(s)",modelValue:Y.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>Y.value.name=l),placeholder:"Your name"},null,8,["modelValue"])])),_:1}),j(w(d),null,{default:C((()=>[j(w(i),{"label-placement":"stacked",label:"Change our second name",modelValue:Y.value.first_name,"onUpdate:modelValue":e[1]||(e[1]=l=>Y.value.first_name=l),placeholder:"Your second name"},null,8,["modelValue"])])),_:1}),j(w(d),null,{default:C((()=>[j(w(i),{"label-placement":"stacked",label:"Change your last name",modelValue:Y.value.second_name,"onUpdate:modelValue":e[2]||(e[2]=l=>Y.value.second_name=l),placeholder:"Your last name"},null,8,["modelValue"])])),_:1}),j(w(d),null,{default:C((()=>[j(w(i),{"label-placement":"stacked",label:"Change your email",modelValue:Y.value.email,"onUpdate:modelValue":e[3]||(e[3]=l=>Y.value.email=l),placeholder:"Your email"},null,8,["modelValue"])])),_:1}),j(w(d),null,{default:C((()=>{var l,a;return[j(w(c),{modelValue:Y.value.country_code,"onUpdate:modelValue":e[4]||(e[4]=l=>Y.value.country_code=l),label:`${null===(l=Y.value.country_code)||void 0===l?void 0:l.iso3} +${null===(a=Y.value.country_code)||void 0===a?void 0:a.phone_code}`,class:"w-2 mr-4"},{default:C((()=>[(h(!0),V(k,null,I(M.value,((l,e)=>(h(),x(w(r),{key:e,value:l},{default:C((()=>[U($(l.iso3)+" +"+$(l.phone_code),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","label"]),j(w(i),{class:"w-9","label-placement":"stacked",label:"Change your phone number",modelValue:Y.value.phone,"onUpdate:modelValue":e[5]||(e[5]=l=>Y.value.phone=l),placeholder:"(+52) 888-88-88"},null,8,["modelValue"])]})),_:1}),j(w(d),{lines:"none"},{default:C((()=>[j(w(c),{modelValue:O.value,"onUpdate:modelValue":e[6]||(e[6]=l=>O.value=l),onIonChange:W,class:"mt-3 mr-2",label:"Country","label-placement":"floating",fill:"outline"},{default:C((()=>[(h(!0),V(k,null,I(z.value,(l=>(h(),x(w(r),{value:l.id},{default:C((()=>[U($(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"]),j(w(c),{modelValue:q.value,"onUpdate:modelValue":e[7]||(e[7]=l=>q.value=l),onIonChange:B,class:"mt-3 mr-2",label:"State","label-placement":"floating",fill:"outline"},{default:C((()=>[(h(!0),V(k,null,I(A.value,(l=>(h(),x(w(r),{value:l.id},{default:C((()=>[U($(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"]),j(w(c),{modelValue:D.value,"onUpdate:modelValue":e[8]||(e[8]=l=>D.value=l),onIonChange:E,class:"mt-3",label:"City","label-placement":"floating",fill:"outline"},{default:C((()=>[(h(!0),V(k,null,I(G.value,(l=>(h(),x(w(r),{value:l.id},{default:C((()=>[U($(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})],32)):H("",!0)])),_:1})],64))}}))}}}));
