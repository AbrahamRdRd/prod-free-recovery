import{d as A,r as p,aM as m,$ as g,by as r,a2 as s,aa as a,bC as k,be as e,a9 as I,a0 as N,aP as R,aN as S}from"./@vue-yfti66JX.js";import{u as B,E as z,t as O,G as P,M as D,s as f,l as V,v as $,r as q,L as E,z as v,g as M}from"./@ionic-BYXd9M1L.js";import{u as T}from"./index-m1nEGGOe.js";import{a as j,f as K}from"./auth-NZOm-NHT.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./@stencil-CHpqkKxm.js";import"./vue-router-C1vmwl4t.js";import"./ionicons-vuVtR0Xh.js";import"./pinia-FlwmMssk.js";import"./register-service-worker-TYP_X6yW.js";/* empty css                  */import"./https-D-b4uF_s.js";import"./axios-CwoVb0Lo.js";import"./vue-toast-notification-BuDNWbXa.js";import"./vue-0gI2gMPI.js";const G=u=>(R("data-v-4ca00a2b"),u=u(),S(),u),J={class:"h-full flex justify-content-center align-items-center"},Z={class:"ion-margin-top ion-padding-horizontal"},H={class:"ion-margin-top ion-padding-horizontal"},Q={class:"forgot-presente-alert ion-margin-start ion-padding-top"},U={class:"ion-padding-horizontal"},W=G(()=>s("p",{class:"ion-margin-start"},[I("¿Aún no tienes cuenta? "),s("a",{href:"/registro",as:"ion-button","router-direction":"forward",id:"open-loading",class:"anchor-register"},"Registrate aquí")],-1)),X=A({__name:"LoginAuth",emits:["change","deactiveAuth"],setup(u,{emit:Y}){const h=B(),_=T(),i=p({email:"",password:""}),l=p(!1),w=p(!1),d=p(!1),b=["OK"],y=[{text:"Cerrar"},{text:"Enviar",handler:t=>{L(t[0])}}],x=[{placeholder:"Ingresa tú correo",type:"email"}],C=async()=>{console.log("provando"),d.value=!0;try{const t=(await j(i.value)).data;_.setSession(t.token,t.user),h.push("/departments")}catch(t){t.response.status==406&&(l.value=!0)}},L=async t=>{l.value=!1;try{await K({email:t})}catch(o){console.error("Revisa tú correo")}},c=t=>{l.value=t};return(t,o)=>(m(),g(e(M),null,{default:r(()=>[s("div",J,[a(e(q),{class:"w-full md:w-30rem"},{default:r(()=>[s("form",{onSubmit:k(C,["prevent"]),class:"ion-margin-horizontal"},[a(e(z),null,{default:r(()=>[a(e(O),{class:"flex justify-content-center"},{default:r(()=>[a(e(P),null,{default:r(()=>[a(e(D),{src:"https://i.imgur.com/NJrNK4Z.png",alt:"Turismo de salud. Regresa como nueva."})]),_:1})]),_:1})]),_:1}),s("div",Z,[a(e(f),{value:i.value.email,onInput:o[0]||(o[0]=n=>i.value.email=n.target.value),label:"Email","label-placement":"floating",fill:"outline",type:"email",placeholder:"email@domain.com"},null,8,["value"])]),s("div",H,[a(e(f),{value:i.value.password,onInput:o[1]||(o[1]=n=>i.value.password=n.target.value),label:"Password",type:"password","label-placement":"floating",fill:"outline"},null,8,["value"])]),s("p",Q,[s("a",{id:"present-alert","router-direction":"forward",onClick:o[2]||(o[2]=n=>l.value=!0)},"¿Olvidaste tú contraseña?")]),s("div",U,[a(e(V),{expand:"block",type:"submit"},{default:r(()=>[I("Log In")]),_:1})]),a(e($)),W],32)]),_:1})]),d.value?(m(),g(e(E),{key:0,"is-open":d.value,message:"Loading...",spinner:"circles",duration:"2000"},null,8,["is-open"])):N("",!0),a(e(v),{"is-open":l.value,trigger:"present-alert",header:"Ingresa tú correo",buttons:y,inputs:x,onDidDismiss:o[3]||(o[3]=n=>c(!1))},null,8,["is-open"]),a(e(v),{"is-open":w.value,header:"Correo o contraseñas son incorrectos.",message:"Algo salio mal. Intenta de nuevo",buttons:b,onDidDismiss:o[4]||(o[4]=n=>c(!1))},null,8,["is-open"])]),_:1}))}}),fe=F(X,[["__scopeId","data-v-4ca00a2b"]]);export{fe as default};
