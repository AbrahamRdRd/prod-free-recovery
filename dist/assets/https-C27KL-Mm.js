import{a as n}from"./axios-CwoVb0Lo.js";import{u as a,r as c}from"./index-DlxuvxbK.js";import{d as u}from"./vue-toast-notification-CyaKMIrI.js";import{d as p}from"./pinia-FlwmMssk.js";const o=p("loading",{state:()=>({active:!1,msg:""}),actions:{setLoading(s){this.active=!0,this.msg=s},clearLoading(){this.active=!1,this.msg=""}}}),r=n.create({baseURL:"https://api.recovery-suites.com",timeout:5e4,headers:{Accept:"application/json"}});r.interceptors.request.use(async s=>{const e=a();return e.isLogged&&(s.headers.Authorization="Bearer ".concat(e.token)),s});r.interceptors.response.use(s=>(o().clearLoading(),s),s=>{const e=a(),t=u.useToast();if(o().clearLoading(),s.response.status===401||s.response.status===419){e.logout(),t.error("Te invitamos a loguearte");const i=s.response.status===401?"/login":"/";c.push({path:i})}return s.response.status===422&&t.error(s.response.data.message),s.response.status===403&&t.error("El usuario no tiene permisos para acceder al recurso, contacte a un administrador."),s.response.status===404&&t.error("El recurso solicitado no existe"),s.response.status===500&&t.error("Error de conexion al servidor."),Promise.reject(s)});export{r as h};
