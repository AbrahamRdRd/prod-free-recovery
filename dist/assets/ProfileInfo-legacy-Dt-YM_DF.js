System.register(["./index-legacy-B3ECT4ME.js","./user-legacy-C3A9p0nA.js","./https-legacy-DZbecaPR.js","./_plugin-vue_export-helper-legacy-DgAO6S8O.js","./axios-legacy-CUPSUh8R.js"],(function(l,e){"use strict";var a,o,t,n,u,d,i,c,r,s,m,v,f,p,_,y,b,g,k,h,V,C,w,I,S,U,x,E,j,P,H,z,D,A,F,O,Y,J,M,N,R,K,L,W,$,q,B,T;return{setters:[l=>{a=l.d,o=l.r,t=l.u,n=l.ah,u=l.o,d=l.c,i=l.g,c=l.w,r=l.e,s=l.I,m=l.h,v=l.s,f=l.t,p=l.z,_=l.k,y=l.m,b=l.X,g=l.q,k=l.aH,h=l.K,V=l.H,C=l.b,w=l.aI,I=l.C,S=l.v,U=l.aJ,x=l.a,E=l.f,j=l.a0,P=l.i,H=l.aa,z=l.n,D=l.L,A=l.P,F=l.T,O=l.W,Y=l.R,J=l.aK,M=l.aL,N=l.aM,R=l.l,K=l.x,L=l.y},l=>{W=l.u,$=l.g,q=l.a},l=>{B=l.h},l=>{T=l._},null],execute:function(){var e=document.createElement("style");e.textContent=".example-content[data-v-d324fb62]{display:flex;align-items:center;justify-content:center;height:100%}.avatar_btn[data-v-d324fb62]{cursor:pointer}\n",document.head.appendChild(e);const X=a({__name:"ModalProfile",props:{userId:Object,avatar:File},setup(l){var e,a;const x=o({id:0,email:"",name:"",first_name:"",second_name:"",password:"",role_id:0,city_id:0,deleted_at:null}),E=l,j=()=>U.dismiss(null,"cancel");t();const P=o(),H=o(),z=o(),D=o([]),A=o(),F=o([]);x.value=E.userId,P.value=null===(e=x.value.city)||void 0===e?void 0:e.state.country_id,H.value=null===(a=x.value.city)||void 0===a?void 0:a.state_id,A.value=x.value.city_id;const O=async()=>{try{z.value=(await B.get("/api/countries")).data}catch(l){console.error("Hubo un error al traer las ciudades")}},Y=async l=>{try{D.value=(await(e=l,B.get(`/api/countries/${e}/states`))).data}catch(a){console.error("Hubo un error al traer los estados")}var e},J=async l=>{try{F.value=(await(e=l,B.get(`/api/states/${e}/cities`))).data}catch(a){console.log("Hubo un error en al traer las ciudades")}var e},M=l=>{console.log("Selected country ID:",l.detail.value),Y(l.detail.value)},N=l=>{console.log("Selected State ID:",l.detail.value),J(l.detail.value)},R=l=>{console.log("Selected City ID:",l.detail.value),x.value.city_id=l.detail.value},K=async()=>{const l={email:x.value.email,name:x.value.name,first_name:x.value.first_name,second_name:x.value.second_name,phone:x.value.phone,city_id:x.value.city_id,image:E.avatar},e=new FormData;for(const n in l)if(Object.prototype.hasOwnProperty.call(l,n)){const o=n,t=l[o];var a;t instanceof File?e.append(o,t):e.append(o,null!==(a=null==t?void 0:t.toString())&&void 0!==a?a:"")}try{var o;(await W(null===(o=E.userId)||void 0===o?void 0:o.id,e)).data,U.dismiss("confirm")}catch(t){console.error("Algo salio mal al actualizar.")}};return n((()=>{var l,e;O(),Y(null===(l=x.value.city)||void 0===l?void 0:l.state.country_id),J(null===(e=x.value.city)||void 0===e?void 0:e.state_id)})),(l,e)=>(u(),d(h,null,[i(r(_),null,{default:c((()=>[i(r(s),null,{default:c((()=>[i(r(m),{slot:"start"},{default:c((()=>[i(r(v),{color:"medium",onClick:j},{default:c((()=>[f("Cancel")])),_:1})])),_:1}),i(r(p),null,{default:c((()=>[f("Actualiza tú información")])),_:1}),i(r(m),{slot:"end"},{default:c((()=>[i(r(v),{onClick:K,strong:!0},{default:c((()=>[f("Confirm")])),_:1})])),_:1})])),_:1})])),_:1}),i(r(S),{class:"ion-padding"},{default:c((()=>[y("form",{onSubmit:K},[i(r(b),null,{default:c((()=>[i(r(g),{"label-placement":"stacked",label:"Cambia tu nombre(s)",modelValue:x.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>x.value.name=l),placeholder:"Your name"},null,8,["modelValue"])])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{"label-placement":"stacked",label:"Cambia tu primer apellido",modelValue:x.value.first_name,"onUpdate:modelValue":e[1]||(e[1]=l=>x.value.first_name=l),placeholder:"Your second name"},null,8,["modelValue"])])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{"label-placement":"stacked",label:"Cambia tu segundo apellido",modelValue:x.value.second_name,"onUpdate:modelValue":e[2]||(e[2]=l=>x.value.second_name=l),placeholder:"Your last name"},null,8,["modelValue"])])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{"label-placement":"stacked",label:"Cambia tu cuenta de email",modelValue:x.value.email,"onUpdate:modelValue":e[3]||(e[3]=l=>x.value.email=l),placeholder:"Your email"},null,8,["modelValue"])])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{"label-placement":"stacked",label:"Cambia tu telefono",modelValue:x.value.phone,"onUpdate:modelValue":e[4]||(e[4]=l=>x.value.phone=l),placeholder:"(+52) 888-88-88"},null,8,["modelValue"])])),_:1}),i(r(b),{lines:"none"},{default:c((()=>[i(r(k),{modelValue:P.value,"onUpdate:modelValue":e[5]||(e[5]=l=>P.value=l),onIonChange:M,class:"mt-3 mr-2",label:"País","label-placement":"floating",fill:"outline"},{default:c((()=>[(u(!0),d(h,null,V(z.value,(l=>(u(),C(r(w),{value:l.id},{default:c((()=>[f(I(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"]),i(r(k),{modelValue:H.value,"onUpdate:modelValue":e[6]||(e[6]=l=>H.value=l),onIonChange:N,class:"mt-3 mr-2",label:"Estado","label-placement":"floating",fill:"outline"},{default:c((()=>[(u(!0),d(h,null,V(D.value,(l=>(u(),C(r(w),{value:l.id},{default:c((()=>[f(I(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"]),i(r(k),{modelValue:A.value,"onUpdate:modelValue":e[7]||(e[7]=l=>A.value=l),onIonChange:R,class:"mt-3",label:"Ciudad","label-placement":"floating",fill:"outline"},{default:c((()=>[(u(!0),d(h,null,V(F.value,(l=>(u(),C(r(w),{value:l.id},{default:c((()=>[f(I(l.name),1)])),_:2},1032,["value"])))),256))])),_:1},8,["modelValue"])])),_:1})],32)])),_:1})],64))}}),G={class:"h-full flex flex-column justify-content-center align-items-center"},Q=["src"],Z=(l=>(K("data-v-d324fb62"),l=l(),L(),l))((()=>y("img",{class:"border-circle",alt:"Silhouette of a person's head",src:"https://ionicframework.com/docs/img/demos/avatar.svg"},null,-1)));l("default",T(a({__name:"ProfileInfo",setup(l){const e=t(),a=x((()=>e.userInfo)),n=JSON.parse(a.value),k=o(!1),V=t(),w=E(),I=o(!1),K=o(),L=o({deleted_at:null}),W=async()=>{const l=await U.create({component:X,componentProps:{userId:L.value,avatar:T.value}});l.present();const{data:e,role:a}=await l.onWillDismiss();"confirm"===e&&await al()},B=()=>{document.getElementById("file-upload").click()},T=o(),ll=l=>{const e=l.target.files[0];T.value=e,ol(e)},el=()=>{V.logout(),I.value=!0,w.replace("/")},al=async()=>{try{var l,e;L.value=(await $(n.id)).data,console.log("NAME",null===(l=L.value.city)||void 0===l?void 0:l.state.country),K.value=null===(e=L.value.city)||void 0===e?void 0:e.state.country.name}catch(a){console.error("Hubo un errror al traer la información del usuario.")}},ol=async l=>{const e=new FormData;e.append("image",l);try{const l=await q(L.value.id,e);await al(),console.log("RES",l.data)}catch(a){console.error("Algo salio mal al actualizar.")}};return j((()=>{al()})),(l,e)=>(u(),d(h,null,[i(r(_),null,{default:c((()=>[i(r(s),null,{default:c((()=>[i(r(m),{slot:"start"},{default:c((()=>[i(r(P),{defaultHref:"/departments",icon:r(H)},null,8,["icon"])])),_:1}),i(r(p),null,{default:c((()=>[f("Perfil personal")])),_:1})])),_:1})])),_:1}),i(r(R),null,{default:c((()=>[i(r(S),null,{default:c((()=>[y("div",G,[i(r(z),{class:"mb-6 w-full md:w-30rem"},{default:c((()=>[i(r(D),{class:"flex justify-content-center mt-5"},{default:c((()=>[L.value.avatar?(u(),C(r(A),{key:0,onClick:B,class:"avatar_btn",as:"ion-button"},{default:c((()=>[y("img",{alt:"Silhouette of a person's head",src:L.value.avatar},null,8,Q),y("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:ll},null,32)])),_:1})):L.value.avatar?F("",!0):(u(),C(r(v),{key:1,class:"w-2 h-2",onClick:B,size:"large",fill:"outline",color:"dark"},{default:c((()=>[y("input",{type:"file",id:"file-upload",style:{display:"none"},onChange:ll},null,32),Z])),_:1}))])),_:1}),i(r(O),{class:"mt-5"},{default:c((()=>[i(r(b),null,{default:c((()=>[i(r(g),{label:"Nombre(s):",placeholder:"Jonh",modelValue:L.value.name,"onUpdate:modelValue":e[0]||(e[0]=l=>L.value.name=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),i(r(v),{fill:"outline",color:"dark",onClick:e[1]||(e[1]=l=>W())},{default:c((()=>[f(" Edit "),i(r(Y),{slot:"end",icon:r(J),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{label:"Primer apellido:",placeholder:"Cena",modelValue:L.value.first_name,"onUpdate:modelValue":e[2]||(e[2]=l=>L.value.first_name=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),i(r(v),{fill:"outline",color:"dark",onClick:e[3]||(e[3]=l=>W())},{default:c((()=>[f(" Edit "),i(r(Y),{slot:"end",icon:r(J),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{label:"Segundo apellido:",placeholder:"Rodríguez",modelValue:L.value.second_name,"onUpdate:modelValue":e[4]||(e[4]=l=>L.value.second_name=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),i(r(v),{fill:"outline",color:"dark",onClick:e[5]||(e[5]=l=>W())},{default:c((()=>[f(" Edit "),i(r(Y),{slot:"end",icon:r(J),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{label:"email",placeholder:"email@email.com",modelValue:L.value.email,"onUpdate:modelValue":e[6]||(e[6]=l=>L.value.email=l),"label-placement":"stacked",readonly:!k.value},null,8,["modelValue","readonly"]),k.value?F("",!0):(u(),C(r(v),{key:0,fill:"outline",color:"dark",onClick:e[7]||(e[7]=l=>W())},{default:c((()=>[f(" Edit "),i(r(Y),{slot:"end",icon:r(J),color:"dark"},null,8,["icon"])])),_:1})),k.value?(u(),C(r(v),{key:1,fill:"outline",color:"dark"},{default:c((()=>[f(" Save "),i(r(Y),{slot:"end",icon:r(M),color:"dark"},null,8,["icon"])])),_:1})):F("",!0)])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{label:"Phone",placeholder:"(+52) 888-888-88-88",modelValue:L.value.phone,"onUpdate:modelValue":e[8]||(e[8]=l=>L.value.phone=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),i(r(v),{fill:"outline",color:"dark",onClick:e[9]||(e[9]=l=>W())},{default:c((()=>[f(" Edit "),i(r(Y),{slot:"end",icon:r(J),color:"dark"},null,8,["icon"])])),_:1})])),_:1}),i(r(b),null,{default:c((()=>[i(r(g),{label:"País",placeholder:"your country",modelValue:K.value,"onUpdate:modelValue":e[10]||(e[10]=l=>K.value=l),"label-placement":"stacked",readonly:""},null,8,["modelValue"]),i(r(v),{fill:"outline",color:"dark",onClick:e[11]||(e[11]=l=>W())},{default:c((()=>[f(" Edit "),i(r(Y),{slot:"end",icon:r(J),color:"dark"},null,8,["icon"])])),_:1})])),_:1})])),_:1})])),_:1}),i(r(v),{onClick:el,class:"px-1 w-full md:w-30rem",expand:"block",fill:"outline",color:"dark"},{default:c((()=>[f("Cerrar Sesión")])),_:1}),I.value?(u(),C(r(N),{key:0,"is-open":I.value,message:"Cerrando sessión...",spinner:"circles",duration:2e3},null,8,["is-open"])):F("",!0)])])),_:1})])),_:1})],64))}}),[["__scopeId","data-v-d324fb62"]]))}}}));
