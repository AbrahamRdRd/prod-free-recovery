import{d as k,f as x,u as y,r as d,G as A,o as m,b as f,w as s,m as a,g as t,p as C,e,L,J as N,P as S,a4 as B,q as g,t as p,s as R,X as z,n as O,aM as T,T as V,aN as q,l as P,x as j,y as D}from"./index-CUp2qGmE.js";import{h as J}from"./https-BqIIIB56.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-CwoVb0Lo.js";const E=n=>J.post("/api/auth/token",n),G=n=>(j("data-v-b85c71e6"),n=n(),D(),n),K={class:"h-full flex justify-content-center align-items-center"},X={class:"ion-margin-top ion-padding-horizontal"},Z={class:"ion-margin-top ion-padding-horizontal"},$={class:"ion-margin-start ion-padding-top"},F={class:"ion-padding-horizontal"},H=G(()=>a("p",{class:"ion-margin-start"},[p("¿Aún no tienes cuenta? "),a("a",{href:"/registro","router-direction":"forward",id:"open-loading",class:"anchor-register"},"Registrate aquí")],-1)),Q=k({__name:"LoginAuth",emits:["change","deactiveAuth"],setup(n,{emit:U}){const _=x(),v=y(),i=d({email:"",password:""}),u=d(!1),h=["Ok"],c=d(!1),I=async()=>{c.value=!0;try{const o=(await E(i.value)).data;v.setSession(o.token,o.user),_.push("/departments")}catch(o){o.response.status==406&&(u.value=!0)}},w=o=>{u.value=o};return(o,l)=>{const b=A("router-link");return m(),f(e(P),null,{default:s(()=>[a("div",K,[t(e(O),{class:"w-full md:w-30rem"},{default:s(()=>[a("form",{onSubmit:C(I,["prevent"]),class:"ion-margin-horizontal"},[t(e(L),null,{default:s(()=>[t(e(N),{class:"flex justify-content-center"},{default:s(()=>[t(e(S),null,{default:s(()=>[t(e(B),{src:"https://i.imgur.com/NJrNK4Z.png",alt:"Turismo de salud. Regresa como nueva."})]),_:1})]),_:1})]),_:1}),a("div",X,[t(e(g),{value:i.value.email,onInput:l[0]||(l[0]=r=>i.value.email=r.target.value),label:"Email","label-placement":"floating",fill:"outline",type:"email",placeholder:"email@domain.com"},null,8,["value"])]),a("div",Z,[t(e(g),{value:i.value.password,onInput:l[1]||(l[1]=r=>i.value.password=r.target.value),label:"Password",type:"password","label-placement":"floating",fill:"outline"},null,8,["value"])]),a("p",$,[t(b,{to:"/recuperar-contraseña"},{default:s(()=>[p("¿Olvidaste tú contraseña?")]),_:1})]),a("div",F,[t(e(R),{expand:"block",type:"submit"},{default:s(()=>[p("Log In")]),_:1})]),t(e(z)),H],32)]),_:1})]),c.value?(m(),f(e(T),{key:0,"is-open":c.value,message:"Loading...",spinner:"circles",duration:"3000"},null,8,["is-open"])):V("",!0),t(e(q),{"is-open":u.value,header:"Correo o contraseñas son incorrectos.",message:"Algo salio mal. Intenta de nuevo",buttons:h,onDidDismiss:l[2]||(l[2]=r=>w(!1))},null,8,["is-open"])]),_:1})}}}),ae=M(Q,[["__scopeId","data-v-b85c71e6"]]);export{ae as default};
