import{d as k,f as x,u as y,r as c,G as L,o as m,b as f,w as s,m as a,g as t,p as A,e,L as C,J as S,P as N,a4 as B,q as g,t as p,s as R,W as z,n as O,aK as V,X as q,aL as P,l as T,x as j,y as D}from"./index-b4t3Mdji.js";import{h as J}from"./https-SOK1QiRA.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-CwoVb0Lo.js";const E=n=>J.post("/api/auth/token",n),G=n=>(j("data-v-835529b3"),n=n(),D(),n),M={class:"h-full flex justify-content-center align-items-center"},W={class:"ion-margin-top ion-padding-horizontal"},X={class:"ion-margin-top ion-padding-horizontal"},Z={class:"ion-margin-start ion-padding-top"},$={class:"ion-padding-horizontal"},F=G(()=>a("p",{class:"ion-margin-start"},[p("¿Aún no tienes cuenta? "),a("a",{href:"/registro","router-direction":"forward",id:"open-loading",class:"anchor-register"},"Registrate aquí")],-1)),H=k({__name:"LoginAuth",emits:["change","deactiveAuth"],setup(n,{emit:Q}){const _=x(),v=y(),i=c({email:"",password:""}),u=c(!1),h=["Ok"],d=c(!1),I=async()=>{d.value=!0;try{const o=(await E(i.value)).data;v.setSession(o.token,o.user),_.push("/departments")}catch(o){o.response.status==406&&(u.value=!0)}},w=o=>{u.value=o};return(o,l)=>{const b=L("router-link");return m(),f(e(T),null,{default:s(()=>[a("div",M,[t(e(O),{class:"w-full md:w-30rem"},{default:s(()=>[a("form",{onSubmit:A(I,["prevent"]),class:"ion-margin-horizontal"},[t(e(C),null,{default:s(()=>[t(e(S),{class:"flex justify-content-center"},{default:s(()=>[t(e(N),null,{default:s(()=>[t(e(B),{src:"https://i.imgur.com/NJrNK4Z.png",alt:"Turismo de salud. Regresa como nueva."})]),_:1})]),_:1})]),_:1}),a("div",W,[t(e(g),{value:i.value.email,onInput:l[0]||(l[0]=r=>i.value.email=r.target.value),label:"Email","label-placement":"floating",fill:"outline",type:"email",placeholder:"email@domain.com"},null,8,["value"])]),a("div",X,[t(e(g),{value:i.value.password,onInput:l[1]||(l[1]=r=>i.value.password=r.target.value),label:"Password",type:"password","label-placement":"floating",fill:"outline"},null,8,["value"])]),a("p",Z,[t(b,{to:"/recuperar-contraseña"},{default:s(()=>[p("¿Olvidaste tú contraseña?")]),_:1})]),a("div",$,[t(e(R),{expand:"block",type:"submit"},{default:s(()=>[p("Log In")]),_:1})]),t(e(z)),F],32)]),_:1})]),d.value?(m(),f(e(V),{key:0,"is-open":d.value,message:"Loading...",spinner:"circles",duration:"3000"},null,8,["is-open"])):q("",!0),t(e(P),{"is-open":u.value,header:"Correo o contraseñas son incorrectos.",message:"Algo salio mal. Intenta de nuevo",buttons:h,onDidDismiss:l[2]||(l[2]=r=>w(!1))},null,8,["is-open"])]),_:1})}}}),ae=K(H,[["__scopeId","data-v-835529b3"]]);export{ae as default};
