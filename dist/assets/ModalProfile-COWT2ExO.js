import{m as G,n as D,l as M,t as K,p as L,v as d,r as p,Q as I,R as h,s as Q,P as N}from"./@ionic-Cum16gaV.js";import{u as R}from"./index-DexuMmDk.js";import{a as J}from"./user-Dq2FRYsz.js";import{h as w}from"./https-D9ix251n.js";import{d as W,r,aG as X,aM as s,a1 as v,aa as o,by as n,be as l,a9 as i,a2 as Z,H as b,aU as k,$ as U,b7 as S}from"./@vue-yfti66JX.js";import"./@stencil-CHpqkKxm.js";import"./vue-router-C1vmwl4t.js";import"./ionicons-vuVtR0Xh.js";import"./pinia-FlwmMssk.js";import"./register-service-worker-TYP_X6yW.js";/* empty css                  */import"./axios-CwoVb0Lo.js";import"./vue-toast-notification-BuDNWbXa.js";import"./vue-0gI2gMPI.js";const ee=()=>w.get("/api/countries"),ae=m=>w.get("/api/countries/".concat(m,"/states")),le=m=>w.get("/api/states/".concat(m,"/cities")),_e=W({__name:"ModalProfile",props:{userId:Object,avatar:File},setup(m){var P,Y;const t=r({id:0,email:"",name:"",first_name:"",second_name:"",password:"",role_id:0,city_id:0,deleted_at:null}),_=m,T=()=>N.dismiss(null,"cancel");R();const y=r(),C=r(),B=r(),x=r([]),V=r(),H=r([]);t.value=_.userId,y.value=(P=t.value.city)==null?void 0:P.state.country_id,C.value=(Y=t.value.city)==null?void 0:Y.state_id,V.value=t.value.city_id;const j=async()=>{try{B.value=(await ee()).data}catch(u){console.error("Hubo un error al traer las ciudades")}},A=async u=>{try{x.value=(await ae(u)).data}catch(a){console.error("Hubo un error al traer los estados")}},F=async u=>{try{H.value=(await le(u)).data}catch(a){console.error("Hubo un error en al traer las ciudades",a)}},z=u=>{A(u.detail.value)},E=u=>{F(u.detail.value)},q=u=>{t.value.city_id=u.detail.value},O=async()=>{var e,$;const u={email:t.value.email,name:t.value.name,first_name:t.value.first_name,second_name:t.value.second_name,phone:t.value.phone,city_id:t.value.city_id,image:_.avatar},a=new FormData;for(const f in u)if(Object.prototype.hasOwnProperty.call(u,f)){const g=f,c=u[g];c instanceof File?a.append(g,c):a.append(g,(e=c==null?void 0:c.toString())!=null?e:"")}try{const f=(await J(($=_.userId)==null?void 0:$.id,a)).data;N.dismiss("confirm")}catch(f){console.error("Algo salio mal al actualizar.")}};return X(()=>{var u,a;j(),A((u=t.value.city)==null?void 0:u.state.country_id),F((a=t.value.city)==null?void 0:a.state_id)}),(u,a)=>(s(),v(b,null,[o(l(L),null,{default:n(()=>[o(l(G),null,{default:n(()=>[o(l(D),{slot:"start"},{default:n(()=>[o(l(M),{color:"medium",onClick:T},{default:n(()=>[i("Cancel")]),_:1})]),_:1}),o(l(K),null,{default:n(()=>[i("Actualiza tú información")]),_:1}),o(l(D),{slot:"end"},{default:n(()=>[o(l(M),{onClick:O,strong:!0},{default:n(()=>[i("Confirm")]),_:1})]),_:1})]),_:1})]),_:1}),o(l(Q),{class:"ion-padding"},{default:n(()=>[Z("form",{onSubmit:O},[o(l(d),null,{default:n(()=>[o(l(p),{"label-placement":"stacked",label:"Cambia tu nombre(s)",modelValue:t.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.name=e),placeholder:"Your name"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:n(()=>[o(l(p),{"label-placement":"stacked",label:"Cambia tu primer apellido",modelValue:t.value.first_name,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.first_name=e),placeholder:"Your second name"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:n(()=>[o(l(p),{"label-placement":"stacked",label:"Cambia tu segundo apellido",modelValue:t.value.second_name,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.second_name=e),placeholder:"Your last name"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:n(()=>[o(l(p),{"label-placement":"stacked",label:"Cambia tu cuenta de email",modelValue:t.value.email,"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.email=e),placeholder:"Your email"},null,8,["modelValue"])]),_:1}),o(l(d),null,{default:n(()=>[o(l(p),{"label-placement":"stacked",label:"Cambia tu telefono",modelValue:t.value.phone,"onUpdate:modelValue":a[4]||(a[4]=e=>t.value.phone=e),placeholder:"(+52) 888-88-88"},null,8,["modelValue"])]),_:1}),o(l(d),{lines:"none"},{default:n(()=>[o(l(I),{modelValue:y.value,"onUpdate:modelValue":a[5]||(a[5]=e=>y.value=e),onIonChange:z,class:"mt-3 mr-2",label:"País","label-placement":"floating",fill:"outline"},{default:n(()=>[(s(!0),v(b,null,k(B.value,e=>(s(),U(l(h),{value:e.id},{default:n(()=>[i(S(e.name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),o(l(I),{modelValue:C.value,"onUpdate:modelValue":a[6]||(a[6]=e=>C.value=e),onIonChange:E,class:"mt-3 mr-2",label:"Estado","label-placement":"floating",fill:"outline"},{default:n(()=>[(s(!0),v(b,null,k(x.value,e=>(s(),U(l(h),{value:e.id},{default:n(()=>[i(S(e.name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),o(l(I),{modelValue:V.value,"onUpdate:modelValue":a[7]||(a[7]=e=>V.value=e),onIonChange:q,class:"mt-3",label:"Ciudad","label-placement":"floating",fill:"outline"},{default:n(()=>[(s(!0),v(b,null,k(H.value,e=>(s(),U(l(h),{value:e.id},{default:n(()=>[i(S(e.name),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1})],32)]),_:1})],64))}});export{_e as default};
